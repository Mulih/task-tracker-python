#!/usr/bin/env python3
import argparse
import os
from task import load_tasks, save_tasks, Task


def add_task(description):
    """Add a new task to the tasks.json file."""
    tasks = load_tasks()
    new_task = {
        "id": len(tasks) + 1,
        "Description": description,
        "Status": "todo",
    }
    tasks.append(new_task)
    save_tasks(tasks)
    print(f"Task added: {new_task}")


def main():
    """Main function to handle CLI commands."""
    parser = argparse.ArgumentParser(description="Task Tracker CLI")
    subparsers = parser.add_subparsers(dest="command", help="Commands")

    # Add "add" command
    add_parser = subparsers.add_parser("add", help="Add a new task")
    add_parser.add_argument("description", type=str, help="Task description")

    args = parser.parse_args()

    if args.command == "add":
        add_task(args.description)
    else:
        parser.print_help()

if __name__ == "__main__":
    main()